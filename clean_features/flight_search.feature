Feature: Търсене и преглед на полети от пътници и членове на екипаж

  Scenario: Пътник търси полет по дестинация, номер и час
    Given потребителят е на страницата за търсене на полети
    And въведе дестинация "London"
    And въведе номер на полет "BG123"
    And въведе интервал от часове от "10:00" до "16:00"
    When натисне бутона "ТЪРСИ"
    Then системата показва списък с полети, съответстващи на критериите
    And всеки полет съдържа информация: номер, летище, час, статус

  Scenario: Търсене с невалидна дестинация
    Given потребителят е на страницата за търсене на полети
    And въведе дестинация "Atlantis"
    When натисне бутона "ТЪРСИ"
    Then се показва съобщение "Няма намерени полети"
    And не се показва списък с полети

  Scenario: Потребителят не попълва търсене
    Given потребителят е на страницата за търсене на полети
    And оставя всички полета празни
    When натисне бутона "ТЪРСИ"
    Then се показва списък с всички налични полети

  Scenario: Член на екипаж преглежда предстоящите си полети
    Given потребителят е логнат
    And е свързан с обект от тип CrewMember
    When направи заявка към /api/my-crew-flights/
    Then получава списък с бъдещи полети, в които участва
    And за всеки полет се виждат останалите членове на екипажа и техните роли

  Scenario: Потребител без роля CrewMember прави заявка
    Given потребителят е логнат
    And не е свързан с CrewMember
    When направи заявка към /api/my-crew-flights/
    Then получава съобщение за грешка "Не сте свързан с екипажа"
    And статусът на отговора е 403 Forbidden

  Scenario: CrewMember няма предстоящи полети
    Given потребителят е логнат
    And е свързан с CrewMember
    And няма планирани полети в бъдеще
    When направи заявка към /api/my-crew-flights/
    Then получава празен списък с полети